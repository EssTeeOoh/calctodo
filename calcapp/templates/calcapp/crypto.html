{% extends 'calcapp/base.html' %}
{% load static %}
{% load humanize %}
{% block title %}Crypto Stats{% endblock %}
{% block header_title %}Crypto Stats{% endblock %}

{% block content %}
  <section class="crypto-section mb-4">
      <div class="content text-center mx-auto" style="max-width: 400px;">
          <h2 class="section-title text-center mb-3">Cryptocurrency Stats</h2>
          <p class="text-muted mb-3">Real-time prices and market data (USD)</p>
          {% if error %}
              <div class="alert alert-warning" role="alert">
                  {{ error }}
              </div>
          {% elif coins %}
              <div class="table-responsive">
                  <table class="table table-dark table-hover">
                      <thead>
                          <tr>
                              <th scope="col">Coin</th>
                              <th scope="col">Symbol</th>
                              <th scope="col">Price</th>
                              <th scope="col">Market Cap</th>
                              <th scope="col">24h Change</th>
                          </tr>
                      </thead>
                      <tbody>
                          {% for coin in coins %}
                              <tr>
                                  <td>{{ coin.name }}</td>
                                  <td>{{ coin.symbol|upper }}</td>
                                  <td>${{ coin.current_price|floatformat:2 }}</td>
                                  <td>${{ coin.market_cap|intcomma }}</td>
                                  <td class="{% if coin.price_change_percentage_24h >= 0 %}text-success{% else %}text-danger{% endif %}">
                                      {{ coin.price_change_percentage_24h|floatformat:2 }}%
                                  </td>
                              </tr>
                          {% endfor %}
                      </tbody>
                  </table>
              </div>
          {% else %}
              <div class="alert alert-warning" role="alert">
                  No crypto data available.
              </div>
          {% endif %}
          <div class="mt-3">
              <a href="{% url 'home' %}" class="btn btn-primary">Back to Home</a>
          </div>
      </div>
  </section>
{% endblock %}